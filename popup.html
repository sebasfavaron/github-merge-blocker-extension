<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="popup.css">
</head>

<body>
  <div class="container">
    <div class="logo-container"
      style="display: flex; align-items: center; justify-content: center; gap: 16px; margin-bottom: 16px;">
      <img src="./icons/icon128.png" alt="GitHub Merge Guardian" style="border-radius: 16px">
      <h1>GitHub Merge Guardian</h1>
    </div>

    <section class="rulesets-section">
      <div class="section-header">
        <h2>Rulesets</h2>
        <button id="load-preset" class="preset-button">Load RM Role preset</button>
      </div>
      <p class="description">
        <strong>Rules are matched by priority (top to bottom).</strong> The first matching rule in the list
        determines the merge strategy. You can drag and drop rules to reorder them and change their priority.
        Use an asterisk (*) as a wildcard for any field. For labels, you can specify multiple patterns separated by
        commas (e.g., "bug,hotfix" or "comm,*fix*"). Rules are automatically saved as you update them.
      </p>

      <div class="rules-container">
        <div id="rules-list" class="rules-list-container">
          <!-- Rules will be dynamically added here -->
        </div>

        <button id="add-rule" class="add-button">Add Rule</button>
      </div>
    </section>
  </div>

  <script src="popup.js"></script>

  <!-- Custom confirmation modal -->
  <div id="confirmation-modal" class="modal">
    <div class="modal-content">
      <h3>Load RM Role Preset</h3>
      <p id="confirmation-message">You have existing rules. What would you like to do?</p>
      <div class="modal-buttons">
        <button id="replace-rules" class="modal-button primary">Replace all rules</button>
        <button id="add-rules" class="modal-button secondary">Add to existing rules</button>
        <button id="cancel-preset" class="modal-button cancel">Cancel</button>
      </div>
    </div>
  </div>
</body>

</html>